---
CLUSTER_CIDR: 100.96.0.0/11
CLUSTER_NAME: {{ spec.tkg.shared_services.cluster.name }}
CLUSTER_PLAN: {{ spec.tkg.shared_services.cluster.plan }}
{% if spec.tkg.shared_services.controlPlane.count is not none %}CONTROL_PLANE_MACHINE_COUNT: {{ spec.tkg.shared_services.controlPlane.count }}{% endif %}
{% if spec.tkg.shared_services.worker.count is not none %}WORKER_MACHINE_COUNT: {{ spec.tkg.shared_services.worker.count }}{% endif %}
ENABLE_MHC: "true"
IDENTITY_MANAGEMENT_TYPE: none
INFRASTRUCTURE_PROVIDER: vsphere
SERVICE_CIDR: 100.64.0.0/13

VSPHERE_SERVER: {{ spec.vsphere.server }}
VSPHERE_USERNAME: {{ spec.vsphere.username }}
VSPHERE_PASSWORD:  {{ spec.vsphere.password }}
VSPHERE_TLS_THUMBPRINT: {{ spec.vsphere.tlsThumbprint }}

VSPHERE_DATACENTER: {{ spec.tkg.shared_services.deployment.datacenter }}
VSPHERE_DATASTORE: {{ spec.tkg.shared_services.deployment.datastore }}
VSPHERE_FOLDER: {{ spec.tkg.shared_services.deployment.folder }}
VSPHERE_NETWORK: {{ spec.tkg.shared_services.deployment.network }}
VSPHERE_RESOURCE_POOL: {{ spec.tkg.shared_services.deployment.resourcePool }}

VSPHERE_SSH_AUTHORIZED_KEY: {{ spec.tkg.shared_services.sshKey }}
VSPHERE_CONTROL_PLANE_ENDPOINT: {{ spec.tkg.shared_services.controlPlane.endpoint }}
VSPHERE_CONTROL_PLANE_DISK_GIB: "{{ spec.tkg.shared_services.controlPlane.diskGib }}"
VSPHERE_CONTROL_PLANE_MEM_MIB: "{{ spec.tkg.shared_services.controlPlane.memoryMib }}"
VSPHERE_CONTROL_PLANE_NUM_CPUS: "{{ spec.tkg.shared_services.controlPlane.cpus }}"
VSPHERE_WORKER_DISK_GIB: "{{ spec.tkg.shared_services.worker.diskGib }}"
VSPHERE_WORKER_MEM_MIB: "{{ spec.tkg.shared_services.worker.memoryMib }}"
VSPHERE_WORKER_NUM_CPUS: "{{ spec.tkg.shared_services.worker.cpus }}"
DEPLOY_TKG_ON_VSPHERE7: true

#! ---------------------------------------------------------------------
#! Proxy configuration
#! ---------------------------------------------------------------------

{% if spec.tkg.common.proxy %}
TKG_HTTP_PROXY: {{ spec.tkg.common.proxy.http}}
TKG_HTTPS_PROXY: {{ spec.tkg.common.proxy.https}}
TKG_NO_PROXY: {{ spec.tkg.common.proxy.noProxy}}
{% endif %}

#! ---------------------------------------------------------------------
#! Common configuration
#! ---------------------------------------------------------------------

# TKG_CUSTOM_IMAGE_REPOSITORY: ""
# TKG_CUSTOM_IMAGE_REPOSITORY_CA_CERTIFICATE: ""

#! ---------------------------------------------------------------------
#! Node configuration 
#! ---------------------------------------------------------------------

{% if spec.tkg.common.node %}
OS_NAME: {{ spec.tkg.common.node.osName}}
OS_VERSION: {{ spec.tkg.common.node.osVersion}}
OS_ARCH: "amd64"
{% endif %}
SIZE: {{ wl_cluster.cluster.size }}